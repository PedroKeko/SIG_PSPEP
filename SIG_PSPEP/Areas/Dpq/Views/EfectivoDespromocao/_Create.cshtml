@model SIG_PSPEP.Entidades.EfectivoOrdemServico
<style>
    .modal-content {
        max-height: 85vh;
        overflow-y: auto;
        border-radius: 10px;
    }

    .modal-header {
        background: rgb(0, 20, 60);
        background: linear-gradient(0deg, rgba(0, 20, 60, 1) 0%, rgba(5, 15, 120, 1) 100%);
        position: sticky;
        color: white;
        padding: 10px 15px;
        border-bottom: 1px solid #dee2e6;
    }

        .modal-header .btn-close {
            filter: invert(1);
            opacity: 1;
        }

    .modal-title {
        font-size: 18px;
    }
</style>

<link rel="stylesheet" type="text/css" href="~/assets/libs/select2/dist/css/select2.min.css" />

<form asp-action="Create" onsubmit="return submitForm(this)">
    <div class="modal-header">
        <h5 class="modal-title">Despromoção Indívidual</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
    </div>
    <div class="modal-body">
        <div class="row justify-content-center">
            <div class="col-md-9">
                <div class="form-group mb-3">
                    <label class="control-label small-label">Efectivo</label>
                    <select asp-for="EfectivoId"
                            asp-items="ViewBag.EfectivoId"
                            class="form-select select2"
                            style="width: 100%;"
                            required>
                        <option value="">-- Selecione o Efectivo --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="control-label small-label">Patente</label>
                    <select asp-for="PatenteId"
                            asp-items="ViewBag.PatenteId"
                            class="form-select form-control-sm select2"
                            style="width: 100%;"
                            required>
                        <option value="">-- Propõe a patente --</option>
                    </select>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="control-label small-label">Ordem de Serviço</label>
                            <select asp-for="OrdemServicoId"
                                    asp-items="ViewBag.OrdemServicoId"
                                    class="form-select form-control-sm select2"
                                    style="width: 100%;"
                                    required>
                                <option value="">-- Ordem de Serviço --</option>
                            </select>
                        </div>

                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="NumDespacho" class="control-label small-label"></label>
                            <input asp-for="NumDespacho" class="form-control form-control-sm input-1 small-input" />
                            <span asp-validation-for="NumDespacho" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="submit" class="custom2-btn btn-2-success">Despromover</button>
        <button type="button" class="custom2-btn btn-2-dark-blue" data-bs-dismiss="modal">Cancelar</button>
    </div>
</form>

<!-- Select2 CSS -->
<script src="~/assets/libs/select2/dist/js/select2.full.min.js"></script>
<script src="~/assets/libs/select2/dist/js/select2.min.js"></script>

<script>
    // Espera o DOM estar pronto
    $(document).ready(function () {
        // Quando qualquer modal for exibido
        $(document).on('shown.bs.modal', '.modal', function () {
            // Inicializa os elementos Select2 dentro do modal aberto
            $(this).find('.select2').each(function () {
                // Destroi instância anterior, se houver
                if ($(this).hasClass("select2-hidden-accessible")) {
                    $(this).select2('destroy');
                }

                // Inicializa novamente com dropdown dentro do modal
                $(this).select2({
                    dropdownParent: $(this).closest('.modal'),
                    width: '100%' // Garante largura total
                });
            });
        });
    });
</script>


